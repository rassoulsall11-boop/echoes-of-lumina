<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ú¶ GEMINI WORLD - EVOLUTION ‚ú¶</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Orbitron', sans-serif; cursor: none; }
        #ui-layer { position: fixed; inset: 0; pointer-events: none; z-index: 10; padding: 20px; }
        
        /* Stats Styles */
        .bar-container { width: 250px; height: 20px; background: rgba(0, 20, 40, 0.8); border: 2px solid #00f2ff; border-radius: 10px; margin-bottom: 10px; position: relative; pointer-events: auto; }
        .bar-fill { height: 100%; width: 100%; transition: width 0.2s; }
        #energy-fill { background: cyan; box-shadow: 0 0 15px cyan; }
        #stamina-fill { background: #ffaa00; }
        .label { position: absolute; width: 100%; text-align: center; color: white; font-size: 10px; font-weight: bold; line-height: 16px; }

        /* Actions */
        #btn-tray { position: absolute; bottom: 30px; right: 30px; display: flex; gap: 15px; pointer-events: auto; }
        .skill-btn { width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: rgba(0, 30, 60, 0.8); color: #fff; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 9px; transition: 0.2s; }
        .skill-btn:hover { background: #00f2ff; color: #000; }

        #custom-cursor { position: fixed; width: 20px; height: 20px; border: 2px solid #00f2ff; border-radius: 50%; pointer-events: none; z-index: 10000; transform: translate(-50%, -50%); }
        #loading-screen { position: fixed; inset: 0; background: #000b1a; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #00f2ff; transition: 1s; }
    </style>
</head>
<body>

<div id="loading-screen">
    <h1>GEMINI WORLD</h1>
    <p>G√©n√©ration du monde ouvert...</p>
</div>

<div id="custom-cursor"></div>

<div id="ui-layer">
    <div class="bar-container"><div id="energy-fill" class="bar-fill"></div><div class="label">√âNERGIE</div></div>
    <div class="bar-container"><div id="stamina-fill" class="bar-fill"></div><div class="label">ENDURANCE</div></div>
    
    <div id="btn-tray">
        <button class="skill-btn" onclick="castIce()">‚ùÑÔ∏è<br>GLACE (F)</button>
        <button class="skill-btn" onclick="togglePhase()">üëª<br>TRAVERS (T)</button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
    let scene, camera, renderer, player, clock;
    let keys = {};
    let stamina = 100, isPhasing = false;
    let velocity = new THREE.Vector3();
    let canJump = true;

    function init() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x020a1a);
        scene.fog = new THREE.FogExp2(0x020a1a, 0.01);

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        clock = new THREE.Clock();

        // Lumi√®res style "Anime"
        scene.add(new THREE.AmbientLight(0x404040, 1.5));
        const sun = new THREE.DirectionalLight(0xffffff, 1);
        sun.position.set(50, 100, 50);
        sun.castShadow = true;
        scene.add(sun);

        // Sol immense
        const ground = new THREE.Mesh(
            new THREE.PlaneGeometry(1000, 1000),
            new THREE.MeshStandardMaterial({ color: 0x1a2a3a })
        );
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);
        
        const grid = new THREE.GridHelper(1000, 100, 0x00f2ff, 0x001122);
        scene.add(grid);

        // Joueur (Avatar Gemini)
        player = new THREE.Group();
        const body = new THREE.Mesh(
            new THREE.CapsuleGeometry(0.5, 1, 8, 16),
            new THREE.MeshStandardMaterial({ color: 0xffffff, metalness: 0.5 })
        );
        body.position.y = 1;
        player.add(body);
        scene.add(player);

        // Event Listeners
        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);
        window.addEventListener('mousemove', e => {
            document.getElementById('custom-cursor').style.left = e.clientX + 'px';
            document.getElementById('custom-cursor').style.top = e.clientY + 'px';
        });

        setTimeout(() => document.getElementById('loading-screen').style.opacity = 0, 2000);
        animate();
    }

    // --- POUVOIRS ---
    function castIce() {
        const ice = new THREE.Mesh(
            new THREE.BoxGeometry(2, 2, 2),
            new THREE.MeshStandardMaterial({ color: 0x00f2ff, transparent: true, opacity: 0.8, emissive: 0x00f2ff })
        );
        const offset = new THREE.Vector3(0, 1, -4).applyQuaternion(player.quaternion);
        ice.position.copy(player.position).add(offset);
        scene.add(ice);
        // Dispara√Æt apr√®s 5 secondes
        setTimeout(() => scene.remove(ice), 5000);
    }

    function togglePhase() {
        isPhasing = !isPhasing;
        player.children[0].material.opacity = isPhasing ? 0.3 : 1;
        player.children[0].material.transparent = isPhasing;
        console.log(isPhasing ? "Mode Intangible ACTIV√â" : "Mode Intangible D√âSACTIV√â");
    }

    function animate() {
        requestAnimationFrame(animate);
        const delta = clock.getDelta();

        // D√©placement (Style Genshin)
        const speed = (keys['ShiftLeft'] && stamina > 0) ? 0.4 : 0.15;
        if (keys['KeyW']) player.translateZ(-speed);
        if (keys['KeyS']) player.translateZ(speed);
        if (keys['KeyA']) player.rotation.y += 0.05;
        if (keys['KeyD']) player.rotation.y -= 0.05;

        // Saut
        if (keys['Space'] && canJump) {
            velocity.y = 0.2;
            canJump = false;
        }
        player.position.y += velocity.y;
        if (player.position.y > 0) {
            velocity.y -= 0.01; // Gravit√©
        } else {
            player.position.y = 0;
            velocity.y = 0;
            canJump = true;
        }

        // Endurance
        if (keys['ShiftLeft'] && (keys['KeyW'] || keys['KeyS'])) {
            stamina = Math.max(0, stamina - 0.5);
        } else {
            stamina = Math.min(100, stamina + 0.2);
        }
        document.getElementById('stamina-fill').style.width = stamina + '%';

        // Touches rapides
        if (keys['KeyF']) { castIce(); keys['KeyF'] = false; }
        if (keys['KeyT']) { togglePhase(); keys['KeyT'] = false; }

        // Cam√©ra Third Person
        const camOffset = new THREE.Vector3(0, 5, 10).applyQuaternion(player.quaternion);
        camera.position.lerp(player.position.clone().add(camOffset), 0.1);
        camera.lookAt(player.position);

        renderer.render(scene, camera);
    }

    init();
</script>
</body>
</html>
