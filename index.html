<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Orbit PRO</title>
    <style>
        :root { --neon-blue: #00eaff; --neon-pink: #ff0055; }
        body { margin: 0; overflow: hidden; background-color: #080808; font-family: 'Segoe UI', sans-serif; touch-action: none; }
        canvas { display: block; filter: contrast(1.2); }
        
        #ui-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            pointer-events: none; padding: 40px 0; box-sizing: border-box;
        }

        .score-display {
            color: white; font-size: 4rem; font-weight: 900; text-shadow: 0 0 20px var(--neon-blue);
            opacity: 0.8;
        }

        .menu-card {
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px);
            padding: 30px; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center; pointer-events: auto; width: 80%; max-width: 300px;
        }

        h1 { color: white; margin: 0; letter-spacing: 4px; font-size: 2rem; }
        p { color: #888; margin: 10px 0 25px; }

        .btn-play {
            background: var(--neon-blue); color: #000; border: none;
            padding: 15px 50px; font-size: 1.2rem; font-weight: bold;
            border-radius: 50px; cursor: pointer; transition: 0.3s;
            box-shadow: 0 0 20px var(--neon-blue);
        }
        .btn-play:active { transform: scale(0.9); }

        .high-score { color: var(--neon-pink); font-weight: bold; margin-top: 15px; display: block; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="ui-container">
        <div id="current-score" class="score-display hidden">0</div>
        
        <div id="main-menu" class="menu-card">
            <h1>NEON<br>ORBIT</h1>
            <p>TOUCHER POUR CHANGER DE SENS</p>
            <button class="btn-play" onclick="startGame()">JOUER</button>
            <span class="high-score" id="high-score-text">BEST: 0</span>
        </div>
    </div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    let isPlaying = false;
    let score = 0;
    let highScore = localStorage.getItem('neonHighScore') || 0;
    let enemies = [];
    let particles = [];
    let shakeTime = 0;
    let frameCount = 0;

    const player = { angle: 0, radius: 12, speed: 0.055, direction: 1, x: 0, y: 0 };
    let orbitRadius = 100;
    let centerX, centerY;

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        centerX = canvas.width / 2;
        centerY = canvas.height / 2;
        orbitRadius = Math.min(canvas.width, canvas.height) * 0.25;
    }
    window.addEventListener('resize', resize);
    resize();

    document.getElementById('high-score-text').innerText = "BEST: " + highScore;

    class Particle {
        constructor(x, y, color) {
            this.x = x; this.y = y;
            this.color = color;
            this.size = Math.random() * 4 + 2;
            this.vx = (Math.random() - 0.5) * 10;
            this.vy = (Math.random() - 0.5) * 10;
            this.life = 1.0;
        }
        update() {
            this.x += this.vx; this.y += this.vy;
            this.life -= 0.02;
        }
        draw() {
            ctx.globalAlpha = this.life;
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x, this.y, this.size, this.size);
            ctx.globalAlpha = 1;
        }
    }

    class Enemy {
        constructor() {
            const side = Math.floor(Math.random() * 4);
            if(side === 0) { this.x = Math.random()*canvas.width; this.y = -30; }
            else if(side === 1) { this.x = canvas.width+30; this.y = Math.random()*canvas.height; }
            else if(side === 2) { this.x = Math.random()*canvas.width; this.y = canvas.height+30; }
            else { this.x = -30; this.y = Math.random()*canvas.height; }
            
            const dx = centerX - this.x, dy = centerY - this.y;
            const dist = Math.sqrt(dx*dx + dy*dy);
            const speed = 2.5 + (score * 0.1);
            this.vx = (dx/dist)*speed; this.vy = (dy/dist)*speed;
            this.angle = 0;
        }
        update() { this.x += this.vx; this.y += this.vy; this.angle += 0.05; }
        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.angle);
            ctx.shadowBlur = 15; ctx.shadowColor = '#ff0055';
            ctx.fillStyle = '#ff0055';
            ctx.fillRect(-8, -8, 16, 16);
            ctx.restore();
        }
    }

    function startGame() {
        score = 0; enemies = []; particles = []; isPlaying = true;
        document.getElementById('main-menu').classList.add('hidden');
        document.getElementById('current-score').classList.remove('hidden');
        animate();
    }

    function gameOver() {
        isPlaying = false;
        shakeTime = 15;
        // Explosion de particules
        for(let i=0; i<30; i++) particles.push(new Particle(player.x, player.y, '#00eaff'));
        
        if(score > highScore) {
            highScore = Math.floor(score);
            localStorage.setItem('neonHighScore', highScore);
        }
        
        setTimeout(() => {
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('high-score-text').innerText = "BEST: " + Math.floor(highScore);
        }, 1000);
    }

    function animate() {
        if(!isPlaying && particles.length === 0) return;
        
        // Screen Shake
        ctx.save();
        if(shakeTime > 0) {
            ctx.translate((Math.random()-0.5)*10, (Math.random()-0.5)*10);
            shakeTime--;
        }

        ctx.fillStyle = 'rgba(8, 8, 8, 0.25)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Orbite
        ctx.beginPath(); ctx.arc(centerX, centerY, orbitRadius, 0, Math.PI*2);
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)'; ctx.lineWidth = 4; ctx.stroke();

        if(isPlaying) {
            // Joueur
            player.angle += player.speed * player.direction;
            player.x = centerX + Math.cos(player.angle) * orbitRadius;
            player.y = centerY + Math.sin(player.angle) * orbitRadius;
            
            ctx.shadowBlur = 20; ctx.shadowColor = '#00eaff';
            ctx.fillStyle = '#00eaff';
            ctx.beginPath(); ctx.arc(player.x, player.y, player.radius, 0, Math.PI*2); ctx.fill();
            ctx.shadowBlur = 0;

            // Ennemis
            if(frameCount++ % Math.max(20, (50 - Math.floor(score/2))) === 0) enemies.push(new Enemy());
            
            enemies.forEach((e, i) => {
                e.update(); e.draw();
                if(Math.hypot(player.x - e.x, player.y - e.y) < player.radius + 8) gameOver();
                if(Math.hypot(centerX - e.x, centerY - e.y) < 10) enemies.splice(i, 1);
            });

            score += 0.05;
            document.getElementById('current-score').innerText = Math.floor(score);
        }

        // Particules
        particles.forEach((p, i) => {
            p.update(); p.draw();
            if(p.life <= 0) particles.splice(i, 1);
        });

        ctx.restore();
        requestAnimationFrame(animate);
    }

    // Input
    const changeDir = () => { if(isPlaying) player.direction *= -1; };
    window.addEventListener('mousedown', changeDir);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); changeDir(); }, {passive: false});

</script>
</body>
</html>
