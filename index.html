<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ú¶ GEMINI WORLD - SYST√àME INT√âGR√â ‚ú¶</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Orbitron', sans-serif; }
        
        #ui-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
        
        /* Stats Panel */
        .stats-panel { position: absolute; top: 30px; left: 30px; display: flex; flex-direction: column; gap: 15px; }
        .bar-container { 
            width: 300px; height: 25px; background: rgba(0,10,30,0.8); 
            border: 2px solid #00f2ff; border-radius: 12px; overflow: hidden; position: relative;
            box-shadow: 0 0 15px rgba(0,242,255,0.3);
        }
        .bar-fill { height: 100%; width: 100%; transition: width 0.3s; position: relative; }
        #energy-fill { background: linear-gradient(90deg, #00f2ff, #0072ff); }
        #stamina-fill { background: linear-gradient(90deg, #ffaa00, #ff6600); }
        .bar-label { 
            position: absolute; width: 100%; text-align: center; top: 50%; transform: translateY(-50%);
            color: white; font-size: 10px; font-weight: bold; text-shadow: 0 0 5px #000;
        }

        /* Comp√©tences */
        #btn-tray { position: absolute; bottom: 40px; right: 40px; display: flex; gap: 15px; pointer-events: auto; }
        .skill-btn { 
            width: 80px; height: 80px; border-radius: 50%; border: 2px solid #00f2ff;
            background: rgba(0,20,40,0.9); color: white; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.3s; font-size: 10px;
        }
        .skill-btn:active { transform: scale(0.9); background: #00f2ff; color: #000; }
        .skill-icon { font-size: 24px; margin-bottom: 2px; }

        /* Status & Log */
        #status-msg {
            position: absolute; top: 120px; left: 30px; color: #00f2ff;
            font-size: 14px; text-shadow: 0 0 10px #00f2ff;
        }

        /* Loading */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000511; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 1000; color: #00f2ff;
        }
        .loader { 
            width: 50px; height: 50px; border: 3px solid #00f2ff; border-top: 3px solid transparent;
            border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div id="loading-screen">
    <div class="loader"></div>
    <h2>INITIALISATION DU BRACELET...</h2>
</div>

<div id="ui-layer">
    <div class="stats-panel">
        <div class="bar-container">
            <div class="bar-fill" id="energy-fill"></div>
            <div class="bar-label">‚ö° ONDES CORPORELLES : <span id="energy-val">100</span>%</div>
        </div>
        <div class="bar-container">
            <div class="bar-fill" id="stamina-fill"></div>
            <div class="bar-label">üí® ENDURANCE : <span id="stamina-val">100</span>%</div>
        </div>
    </div>

    <div id="status-msg">Syst√®me Gemini : Pr√™t</div>

    <div id="btn-tray">
        <button class="skill-btn" id="ice-btn">
            <span class="skill-icon">‚ùÑÔ∏è</span>
            <span>CR√âATION</span>
        </button>
        <button class="skill-btn" id="phase-btn">
            <span class="skill-icon">üëª</span>
            <span>TRAVERS</span>
        </button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
    let scene, camera, renderer, player, clock;
    let energy = 100, stamina = 100;
    let isIntangible = false;
    let iceObjects = [];
    let keys = {};

    function init() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000511);
        scene.fog = new THREE.FogExp2(0x000a1a, 0.05);

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 5, 10);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        clock = new THREE.Clock();

        // Lights
        const ambient = new THREE.AmbientLight(0x4040ff, 0.5);
        scene.add(ambient);
        const sun = new THREE.PointLight(0x00f2ff, 2, 50);
        sun.position.set(5, 10, 5);
        scene.add(sun);

        // Ground (Monde Gemini)
        const groundGeo = new THREE.PlaneGeometry(200, 200, 20, 20);
        const groundMat = new THREE.MeshStandardMaterial({ color: 0x050515, wireframe: true });
        const ground = new THREE.Mesh(groundGeo, groundMat);
        ground.rotation.x = -Math.PI / 2;
        scene.add(ground);

        // Player (Avatar avec Bracelet)
        player = new THREE.Group();
        const bodyGeo = new THREE.CapsuleGeometry(0.5, 1, 4, 8);
        const bodyMat = new THREE.MeshStandardMaterial({ 
            color: 0x00f2ff, 
            transparent: true, 
            opacity: 1,
            metalness: 0.8,
            roughness: 0.2
        });
        const body = new THREE.Mesh(bodyGeo, bodyMat);
        body.position.y = 1;
        player.add(body);
        
        // Bracelet (Anneau lumineux au poignet)
        const braceGeo = new THREE.TorusGeometry(0.15, 0.05, 8, 24);
        const braceMat = new THREE.MeshBasicMaterial({ color: 0xffffff });
        const bracelet = new THREE.Mesh(braceGeo, braceMat);
        bracelet.position.set(0.6, 1.2, 0);
        player.add(bracelet);

        scene.add(player);

        setupControls();
        animate();

        // Fin chargement
        setTimeout(() => document.getElementById('loading-screen').style.display = 'none', 1500);
    }

    function setupControls() {
        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        // Bouton Cr√©ation Glace
        document.getElementById('ice-btn').addEventListener('click', createIce);
        // Bouton Travers (Intangible)
        document.getElementById('phase-btn').addEventListener('click', toggleIntangibility);
    }

    function createIce() {
        if (energy < 20) return;
        energy -= 20;
        
        const iceGeo = new THREE.ConeGeometry(1, 4, 4);
        const iceMat = new THREE.MeshStandardMaterial({ color: 0xccffff, transparent: true, opacity: 0.8 });
        
        for(let i=0; i<5; i++) {
            const ice = new THREE.Mesh(iceGeo, iceMat);
            ice.position.set(
                player.position.x + (Math.random()-0.5)*10,
                0,
                player.position.z + (Math.random()-0.5)*10
            );
            scene.add(ice);
            iceObjects.push({ mesh: ice, life: 100 });
        }
        logStatus("Cr√©ation : GLACE ACTIV√âE");
    }

    function toggleIntangibility() {
        isIntangible = !isIntangible;
        player.children[0].material.opacity = isIntangible ? 0.3 : 1;
        logStatus(isIntangible ? "Mode Intangible : TRAVERS" : "Mode Physique : ACTIF");
    }

    function logStatus(txt) {
        document.getElementById('status-msg').innerText = txt;
    }

    function animate() {
        requestAnimationFrame(animate);
        const delta = clock.getDelta();

        // Mouvement ZQSD
        let isMoving = false;
        if (keys['KeyW']) { player.position.z -= 0.1; isMoving = true; }
        if (keys['KeyS']) { player.position.z += 0.1; isMoving = true; }
        if (keys['KeyA']) { player.position.x -= 0.1; isMoving = true; }
        if (keys['KeyD']) { player.position.x += 0.1; isMoving = true; }

        // Recharge √ânergie (Chaleur du corps / Mouvement)
        if (isMoving && energy < 100) energy += 0.05;
        if (!isMoving && energy < 100) energy += 0.01; // Repos

        // Raccourcis clavier
        if (keys['KeyE']) { createIce(); keys['KeyE'] = false; }
        if (keys['KeyQ']) { toggleIntangibility(); keys['KeyQ'] = false; }

        // Camera follow
        camera.position.lerp(new THREE.Vector3(player.position.x, player.position.y + 5, player.position.z + 10), 0.1);
        camera.lookAt(player.position);

        // Update UI
        document.getElementById('energy-fill').style.width = energy + "%";
        document.getElementById('energy-val').innerText = Math.floor(energy);

        renderer.render(scene, camera);
    }

    init();
</script>
</body>
</html>
